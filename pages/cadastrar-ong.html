<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <link rel="shortcut icon" href="../favicon/fav.ico" type="image/x-icon">

    <title>Cadastrar ONG</title>
    <link rel="stylesheet" href="../styles/cadastrar-ong.css">
    <!-- <script src="../scripts/cadastrar-ong.js" defer></script> -->
</head>
<body>
    <header>
        <!-- Voltar pra HOME LOGADO (USER) -->
        <a href="#">
            <button id="btn-voltar">
                <img src="../images/seta-voltar.png" alt="Botão Voltar">voltar
            </button>
        </a>
    </header>

    <main>
        <section class="flex-container">
            <div id="paragrafo">
                <h1>Cadastrar ONG</h1>
            </div>

            <!-- Formulário -->
            <form autocomplete="off">
                <!-- OBS: O Chrome não está aceitando o autocomplete="off" em alguns casos, então uma forma para resolver isso é criar dois inputs, colocar o mesmo id para os dois e colocar o display: none no primeiro. -->

                <!-- Input NOME -->
                <div class="inputs">
                    <label for="ipt-nome">Nome</label>
                    <input type="text" id="ipt-nome" style="display: none;">
                    <input type="text" id="ipt-nome" class="caixa-input" placeholder="Digite o nome da sua ONG..." oninput="nameValidate()">

                    <span class="alerta" id="min-carac-nome">Mínimo de 3 caracteres</span>
                    <span class="prosseguir" id="nome-prosseguir">Tudo Certo &#x2705</span>
                </div>
            
                <!-- Input ENDEREÇO -->
                <div class="inputs">
                    <label for="ipt-endereco">Endereço</label>
                    <input type="text" name="endereco" id="ipt-endereco" class="caixa-input" placeholder="Digite o endereço da sua ONG...">

                    <span class="alerta">Mínimo de 20 caracteres</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>
                
                <!-- Input E-MAIL -->
                <div class="inputs">
                    <label for="ipt-email">E-mail</label>
                    <input type="text" id="ipt-email" class="caixa-input" placeholder="Digite o e-mail da sua ONG..." oninput="emailValidate()">

                    <span class="alerta">E-mail inválido</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>
                
                <!-- Input CONTATO -->
                <div class="inputs">
                    <label for="ipt-contato">Contato</label>
                    <input type="text" id="telefone" class="caixa-input" maxlength="15" placeholder="Digite o número de contato da sua ONG..." oninput="numeroValidate()">

                    <span class="alerta">Número inválido</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>

                <!-- Input CNPJ -->
                <div class="inputs">
                    <label for="ipt-cnpj">CNPJ</label>
                    <input type="number" id="ipt-cnpj" class="caixa-input" min="0" placeholder="Digite o CNPJ da sua ONG..." oninput="cnpjValidate()">

                    <span class="alerta">CNPJ incompleto</span>
                </div>

                <!-- Input TIPO -->
                <div class="inputs">
                    <label for="ipt-tipos">Tipo</label>
                    <select id="select-tipo" class="caixa-input">
                        <optgroup label="Escolha">
                            <option value="#">Cuida do meio ambiente</option>
                            <option value="#">Cuida de animais abandonados</option>
                            <option value="#">Cuida de crianças e adolescentes</option>
                            <option value="#">Faz refeição</option>
                            <option value="#">Distribuição de roupas</option>
                        </optgroup>
                    </select>
                </div>

                <!-- Caixa Formas de Pagamento -->
                <div class="inputs">
                    <p class="subtitulo">Formas de Pagamentos</p>
                    <div id="ipt-pagamento">
                        <!-- Pix -->
                        <div class="flex-container-pagamento">
                            <label for="ipt-pix" class="label-pagameto">Pix</label>
                            <input type="text" id="ipt-pix" placeholder="Digite seu pix...">
                        </div>

                        <!-- Linha Divisória -->
                        <div id="flex-container-linha">
                            <div class="linha-vertical"></div>
                            <div id="linha-divisoria"></div>
                            <div class="linha-vertical"></div>
                        </div>

                        <!-- Conta Bancária -->
                        <div class="flex-container-pagamento">
                            <label class="label-pagameto">Conta Bancária</label>
                            <div class="flex">
                                <div class="alinhando-pagamentos">
                                    <input type="text" id="ipt-numero" class="ipt-cbancaria" placeholder="Número da conta...">

                                    <input type="text" id="ipt-agencia" class="ipt-cbancaria" placeholder="Agência da conta...">
                                </div>
                                <div class="alinhando-pagamentos">
                                    <input type="text" id="ipt-instituicao" class="ipt-cbancaria" placeholder="Instituição da conta...">

                                    <input type="text" id="ipt-tipconta" class="ipt-cbancaria" placeholder="Tipo da conta...">
                                </div>
                            </div>
                        </div>
                    </div>

                    <span class="alerta">Falta informações na forma de pagamento</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>

                <!-- Input REGIÃO-->
                <div class="inputs">
                    <label for="selec-regiao">Região</label>
                    <select id="select-regiao">
                        <optgroup label="Regiões de PE">
                            <option value="">Zona da Mata</option>
                            <option value="">Metropolitana</option>
                            <option value="">Agreste</option>
                            <option value="">Sertão</option>
                            <option value="">São Francisco</option>
                        </optgroup>
                    </select>

                    <span class="alerta">Região não informada</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>
                

                <!-- Input DESCRIÇÃO -->
                <div class="inputs">
                    <label for="ipt-descricao">Descrição</label>
                    <textarea id="ipt-descricao" rows="10" placeholder="Descreva em até 500 caracteres..." oninput="descricaoValidate()"></textarea>

                    <span class="alerta" id="min-carac">Mínimo de 20 caracteres</span>
                    <span class="alerta" id="max-carac">Possui mais de 500 caracteres</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>

                <!-- Input FOTO -->
                <div id="area-maior">
                    <div class="area-menor">
                        
                        <div id="caixa-file">
                            <input type="file" id="file">
                            <label for="file">Procurar Foto</label>
                            
                            <img src="../icons/icone-lupa.svg" alt="Lupa" id="icon-lupa"> 
                        </div>

                        <div id="escolher-img"></div>

                        <span class="alerta" id="alerta-img">Foto não selecionada</span>
                    </div>
                </div>
            </form>
        </section>
    </main>

    <footer>
        <button type="submit" id="btn-enviar" onclick="verificar()">Enviar</button>
    </footer>

    <script>
    const forms       = document.querySelector('form')
    const campos      = document.querySelectorAll('.caixa-input')
    const spans       = document.querySelectorAll('.alerta')
    const emailRegex  = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;


    // Função para mostrar o erro
    function setError(index){
        campos[index].style.border  = "2px solid #000"
        spans [index].style.display = "block" 
    }

    // Função para remover o erro
    function removerError(index){
        campos[index].style.border  = ""
        spans [index].style.display = "none" 
    }

    // Função para validar o nome
    function nameValidate(){
        if(campos[0].value.length < 3){
            setError(0)
        } else{
            removerError(0)
        }
    }

    // Função para validar o email
    function emailValidate(){
        if(emailRegex.test(campos[2].value)){
            removerError(2)
        } else{
            setError(2)
        }
    }

    // Função para validar o número de contato
    function numeroValidate(){
        if(campos[3].value.length < 14){
            setError(3)
        } else{
            removerError(3)
        }
    }

    // Função para validar o CNPJ
    function cnpjValidate(){
        if(campos[4].value.length < 14){
            setError(4)
        } else{
            removerError(4)
        }
    }

    // Função para validar a descrição
    function descricaoValidate(){
        const campoTxtArea = document.getElementById('ipt-descricao')
        const spanMin      = document.querySelector('#min-carac')
        const spanMax      = document.querySelector('#max-carac')
        
        // Caso tenha menos de 20 caracteres
        if (campoTxtArea.value.length < 20){
            campoTxtArea.style.border = "2px solid #000"
            spanMin.style.display = "block"
        } else{
            campoTxtArea.style.border = ""
            spanMin.style.display = "none"
        }

        // Caso tenha mais de 500 caracteres
        if(campoTxtArea.value.length > 500){
            campoTxtArea.style.border = "2px solid #000"
            spanMax.style.display = "block"
        } else{
            campoTxtArea.style.border = ""
            spanMax.style.display = "none"
        }
    } 
    </script>
</body>
</html>