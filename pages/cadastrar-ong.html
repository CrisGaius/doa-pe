<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <link rel="shortcut icon" href="../favicon/fav.ico" type="image/x-icon">

    <title>Cadastrar ONG</title>
    <link rel="stylesheet" href="../styles/config.css">
    <link rel="stylesheet" href="../styles/cadastrar-ong.css">
    <!-- <script src="../scripts/cadastrar-ong.js" defer></script> -->
</head>
<body>
    <header>
        <!-- Voltar pra HOME LOGADO (USER) -->
        <a href="../index-deslogado.html">
            <button id="btn-voltar">
                <img src="../images/seta-voltar.png" alt="Botão Voltar">voltar
            </button>
        </a>
    </header>

    <main>
        <section class="flex-container">
            <div id="paragrafo">
                <h1>Cadastrar ONG</h1>
            </div>

            <!-- Formulário -->
            <form autocomplete="off">
                <!-- OBS: O Chrome não está aceitando o autocomplete="off" em alguns casos, então uma forma para resolver isso é criar dois inputs, colocar o mesmo id para os dois e colocar o display: none no primeiro. -->

                <!-- Input NOME -->
                <div class="inputs">
                    <label for="ipt-nome">Nome</label>
                    <input type="text" id="ipt-nome" style="display: none;">
                    <input type="text" id="ipt-nome" class="caixa-input campos" placeholder="Digite o nome da sua ONG..." oninput="nameValidate()">

                    <span class="alerta" id="min-carac-nome">Mínimo de 3 caracteres</span>
                    <span class="prosseguir" id="nome-prosseguir">Tudo Certo &#x2705</span>
                </div>
            
                <!-- Input ENDEREÇO -->
                <div class="inputs">
                    <label for="ipt-endereco">Endereço</label>
                    <input type="text" name="endereco" id="ipt-endereco" class="caixa-input campos" placeholder="Digite o endereço da sua ONG..." oninput="enderecoValidate()">

                    <span class="alerta">Mínimo de 20 caracteres</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>
                
                <!-- Input E-MAIL -->
                <div class="inputs">
                    <label for="ipt-email">E-mail</label>
                    <input type="text" id="ipt-email" class="caixa-input campos" placeholder="Digite o e-mail da sua ONG..." oninput="emailValidate()">

                    <span class="alerta">E-mail inválido</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>
                
                <!-- Input CONTATO -->
                <div class="inputs">
                    <label for="ipt-contato">Contato</label>
                    <input type="text" id="telefone" class="caixa-input campos" maxlength="15" placeholder="Digite o número de contato da sua ONG..." oninput="numeroValidate()">

                    <span class="alerta">Número inválido</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>

                <!-- Input CNPJ -->
                <div class="inputs">
                    <label for="ipt-cnpj">CNPJ</label>
                    <input type="text" id="cnpj" class="caixa-input camps" maxlength="18" placeholder="Digite o CNPJ da sua ONG..." oninput="cnpjValidate()">

                    <span class="alerta">CNPJ incompleto</span>
                </div>

                <!-- Input TIPO -->
                <div class="inputs">
                    <label for="ipt-tipos">Tipo</label>
                    <select id="select-tipo" class="caixa-input campos">
                        <optgroup label="Escolha">
                            <option value="#">Cuida do meio ambiente</option>
                            <option value="#">Cuida de animais abandonados</option>
                            <option value="#">Cuida de crianças e adolescentes</option>
                            <option value="#">Faz refeição</option>
                            <option value="#">Distribuição de roupas</option>
                        </optgroup>
                    </select>
                </div>

                <!-- Caixa Formas de Pagamento -->
                <div class="inputs">
                    <p class="subtitulo">Formas de Pagamentos</p>
                    <div id="ipt-pagamento">
                        <!-- Pix -->
                        <div class="flex-container-pagamento">
                            <label for="ipt-pix" class="label-pagameto">Pix</label>
                            <input type="text" id="ipt-pix" class="campos" placeholder="Digite seu pix..." oninput="pixValidate()">

                            <span class="alerta">Pix inválido</span>
                        </div>

                        <!-- Linha Divisória -->
                        <div id="flex-container-linha">
                            <div class="linha-vertical"></div>
                            <div id="linha-divisoria"></div>
                            <div class="linha-vertical"></div>
                        </div>

                        <!-- Conta Bancária -->
                        <div class="flex-container-pagamento">
                            <label class="label-pagameto">Conta Bancária</label>
                            <div class="flex">
                                <div class="alinhando-pagamentos">
                                    <div class="ipt-span-vertical">
                                        <input type="text" class="ipt-cbancaria campos" placeholder="Número da conta" oninput="numcontaValidate()">

                                        <span class="alerta">Número inválido</span>
                                    </div>

                                    <div class="ipt-span-vertical">
                                        <input type="text" class="ipt-cbancaria campos" placeholder="Agência da conta" oninput="agenciaValidate()">

                                        <span class="alerta">Nome inválido</span>
                                    </div>
                                </div>
                                <div class="alinhando-pagamentos">
                                    <div class="ipt-span-vertical">
                                        <input type="text" class="ipt-cbancaria campos" placeholder="Instituição da conta" oninput="instituicaoValidate()">

                                        <span class="alerta">Instituição inválida</span>
                                    </div>

                                    
                                    <div class="ipt-span-vertica">
                                        <select id="select-conta" class="ipt-cbancaria campos">
                                            <option id="option-fisrt-conta">Tipo da conta</option>
                                            <option>Conta corrente</option>
                                            <option>Conta poupança</option>
                                        </select>
                                        <span class="alerta" style="display: block;">Selecione o tipo de conta</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <span class="alerta">Falta informações na forma de pagamento</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>

                <!-- Input REGIÃO-->
                <div class="inputs">
                    <label for="selec-regiao">Região</label>
                    <select id="select-regiao">
                        <optgroup label="Regiões de PE">
                            <option value="">Zona da Mata</option>
                            <option value="">Metropolitana</option>
                            <option value="">Agreste</option>
                            <option value="">Sertão</option>
                            <option value="">São Francisco</option>
                        </optgroup>
                    </select>
                </div>
                

                <!-- Input DESCRIÇÃO -->
                <div class="inputs">
                    <label for="ipt-descricao">Descrição</label>
                    <textarea id="ipt-descricao" rows="10" placeholder="Descreva em até 500 caracteres..." oninput="descricaoValidate()"></textarea>

                    <span class="alerta" id="min-carac">Mínimo de 20 caracteres</span>
                    <span class="alerta" id="max-carac">Possui mais de 500 caracteres</span>
                    <span class="prosseguir">Tudo Certo &#x2705</span>
                </div>

                <!-- Input FOTO -->
                <div id="area-maior">
                    <div class="area-menor">
                        
                        <div id="caixa-file">
                            <input type="file" id="file">
                            <label for="file">Procurar Foto</label>
                            
                            <img src="../icons/icone-lupa.svg" alt="Lupa" id="icon-lupa"> 
                        </div>

                        <div id="escolher-img"></div>

                        <span class="alerta" id="alerta-img">Foto não selecionada</span>
                    </div>
                </div>
            </form>
        </section>
    </main>

    <footer>
        <a href="../index-deslogado.html">
            <button type="submit" id="btn-enviar" onclick="verificar()">Enviar</button>
        </a>
    </footer>

    <script>
    // Validação
    const forms       = document.querySelector('form')
    const campos      = document.querySelectorAll('.campos')
    const spans       = document.querySelectorAll('.alerta')
    const emailRegex  = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;


    // Função para mostrar o erro
    function setError(index){
        campos[index].style.border  = "2px solid #000"
        spans [index].style.display = "block" 
    }
    // Função para remover o erro
    function removerError(index){
        campos[index].style.border  = ""
        spans [index].style.display = "none" 
    }

    // Função para validar o nome
    function nameValidate(){
        if(campos[0].value.length < 3){
            setError(0)
        } else{
            removerError(0)
        }
    }

    // Função para validar o endereçco
    function enderecoValidate(){
        if (campos[1].value.length < 20){
            setError(1)
        } else{
            removerError(1)
        }
    }

    // Função para validar o email
    function emailValidate(){
        if(emailRegex.test(campos[2].value)){
            removerError(2)
        } else{
            setError(2)
        }
    }

    // Função para validar o número de contato
    function numeroValidate(){
        if(campos[3].value.length < 14){
            setError(3)
        } else{
            removerError(3)
        }
    }

    // Função para validar o CNPJ
    function cnpjValidate(){
        if(campos[4].value.length < 18){
            setError(4)
        } else{
            removerError(4)
        }
    }

    // Função para validar o pix
    function pixValidate(){
        if(campos[5].value.length < 18){
            setError(5)
        } else{
            removerError(5)
        }
    }

    // Função para validar o número (conta bancária)
    function numcontaValidate(){
        if(campos[6].value.length < 8){
            setError(6)
        } else{
            removerError(6)
        }
    }

    // Função para validar a agência (conta bancária)
    function agenciaValidate(){
        if(campos[7].value.length < 4){
            setError(7)
        } else{
            removerError(7)
        }
    }

    // Função para validar a instituição (conta bancária)
    function instituicaoValidate(){
        if(campos[8].value.length < 4){
            setError(8)
        } else{
            removerError(8)
        }
    }

    // Função para deixar o primeiro option com a cor do placeholder
    function tipoConta(){
        let selectConta = document.getElementById('select-conta')
        let firstOption = document.getElementById('option-fisrt-conta')

        // Colocar a cor do primeiro option como se fosse o placeholder
        function setColor(){
            firstOption.style.color = "#000"
        }
        // Remove a cor do primeiro option para que identifique marcou algo
        function removerColor(){
            firstOption.style.color = "#7b7b7b"
        }

        selectConta.addEventListener('click', () => {
            if (selectConta.value == firstOption){
                setColor()
            } else{
                removerColor()
            }
        })        
        }


    // Função para validar a descrição
    function descricaoValidate(){
        const campoTxtArea = document.getElementById('ipt-descricao')
        const spanMin      = document.querySelector('#min-carac')
        const spanMax      = document.querySelector('#max-carac')
        
        // Caso tenha menos de 20 caracteres
        if (campoTxtArea.value.length < 20){
            campoTxtArea.style.border = "2px solid #000"
            spanMin.style.display = "block"
        } else{
            campoTxtArea.style.border = ""
            spanMin.style.display = "none"
        }
        // Caso tenha mais de 500 caracteres
        if(campoTxtArea.value.length > 500){
            campoTxtArea.style.border = "2px solid #000"
            spanMax.style.display = "block"
        } else{
            campoTxtArea.style.border = ""
            spanMax.style.display = "none"
        }
    }


    // MÁSCARA

    // Máscara pro contato
    function mascaraTelefone(event) {
        const telefoneInput = event.target;
        let valorTelefone = telefoneInput.value.replace(/\D/g, '');

        if (valorTelefone.length > 11) {
            valorTelefone = valorTelefone.slice(0, 11); // Limita a 11 caracteres
        }

        if (valorTelefone.length <= 10) {
            // Números residenciais:  (XX) XXXX-XXXX
            telefoneInput.value = valorTelefone.replace(/(\d{2})(\d{0,4})(\d{0,4})/, '($1) $2-$3');
        } else {
            // Números pessoais: (XX) XXXXX-XXXX
            telefoneInput.value = valorTelefone.replace(/(\d{2})(\d{0,5})(\d{0,4})/, '($1) $2-$3');
        }
    }
    const inputTelefone = document.getElementById('telefone');
    // Adicione um ouvinte de evento 'input' para chamar a função
    inputTelefone.addEventListener('input', mascaraTelefone);


    // Máscara pro CNPJ
    // Estrutura:  XX. XXX. XXX/XXXX-XX
    const input = document.getElementById('cnpj')
    input.addEventListener('keypress', () => {
        let inputLength = input.value.length

        // IF para add o ponto
        if (inputLength === 2 || inputLength === 6){
            input.value += '.'
        }
        // IF para add a barra
        if (inputLength === 10){
            input.value += '/'
        }
        // IF para add o traço
        if (inputLength === 15){
            input.value += '-'
        }
    })
    </script>
</body>
</html>